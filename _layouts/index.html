<!DOCTYPE html>
<html lang="en">
<head>
    {% include meta.html %}

    <title>{{ site.title }}</title>
    <meta property="og:title" content="{{ page.title }}" />
    <meta property="og:type" content="profile" />
</head>
<body>
<article>
    <h1>{{ page.title }}</h1>

    <section>
    {{ content }}
    </section>

    {% assign talks = site.posts | where_exp: "item", "item.tags contains 'talk'" %}
    <section>
        <h2>Talks</h2>

        <ul>
            {% for post in talks %}
            <li>
                {{ post.date | date: "%Y-%m-%d" }}
                <a href="{{ post.url }}">{{ post.title }}</a>
            </li>
            {% endfor %}
        </ul>
    </section>

    {% assign blogPosts = site.posts | where_exp: "item", "item.tags contains 'blog'" %}
    <section>
        <h2>Blog</h2>

        <ul>
            {% for post in blogPosts %}
            <li>
                {{ post.date | date: "%Y-%m-%d" }}
                <a href="{{ post.url }}">{{ post.title }}</a>
            </li>
            {% endfor %}
        </ul>
    </section>
</article>

<script type="application/javascript">
    const makeEmailReadable = () => {
        const emailValueBase64 = 'cGF2ZWwua3VjZXJhQGhleS5jb20='
        const emailValue = atob(emailValueBase64)
        const emailElement = document.getElementById('email')

        emailElement.setAttribute('href', 'mailto:' + emailValue)
        emailElement.textContent = emailValue
    }

    if (document.readyState !== 'loading') {
        makeEmailReadable()
    } else {
        document.addEventListener('DOMContentLoaded', makeEmailReadable)
    }
</script>
</body>
</html>
